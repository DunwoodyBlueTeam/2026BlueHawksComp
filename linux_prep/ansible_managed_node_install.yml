---
  - name: Prepare ansible managed nodes
    hosts: all
    roles:
      - role: ansible_managed
        vars:
          username: ansible
          ssh_public_key: "/home/ansible-control/.ssh/id_ed25519.pub"
      # If we need to change the internal network cidr at the comp.
      #- role: firewalld_configured
      #  vars:
      #    internal_network_cidr: 172.20.242.0/24
      - role: ssh_hardened
        vars:
          ssh_port: 22
          linux_private_network_cidr: 172.20.242.0/24
      #- role: webserver_managed
# cleanup after comp. here if we need it.
  - name: Webserver
    hosts: ecom
    roles:
      - role: webserver_managed
  - name: Webmail
    hosts: webmail
    roles:
      - role: webmail_managed
  - name: Splunk
    hosts: splunk
    roles:
      - role: splunk_managed
